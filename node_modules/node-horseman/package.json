{
  "name": "node-horseman",
  "version": "1.5.4",
  "description": "Run PhantomJS from Node",
  "repository": {
    "type": "git",
    "url": "https://github.com/johntitus/node-horseman.git"
  },
  "main": "lib/index",
  "directories": {
    "test": "test"
  },
  "dependencies": {
    "clone": "^0.1.19",
    "deasync": "0.0.10",
    "debug": "^2.1.1",
    "defaults": "~1.0.0",
    "node-phantom-simple": "^1.2.0"
  },
  "devDependencies": {
    "mocha": "~1.17.1",
    "should": "~2.1.1",
    "express": "^4.10.4"
  },
  "scripts": {
    "test": "make test"
  },
  "keywords": [
    "phantomjs",
    "horseman",
    "headless",
    "browser"
  ],
  "author": {
    "name": "John Titus",
    "email": "john.titus@gmail.com"
  },
  "license": "MIT",
  "readme": "Horseman\n=========\n\nHorseman lets you run [PhantomJS](http://phantomjs.org/) from Node.\n\nHorseman has:\n  * a simple, chainable API, like jQuery,\n  * an easy-to-use control flow (see the examples),\n  * support for multiple tabs open at the same time.\n\nAdditionally, Horseman loads [jQuery](http://jquery.com/) onto each page by default, which means you can use it inside your `evaluate` and `manipulate` functions automatically.\n\n## Installation\n1) Install Node, if you haven't already:\n\nhttp://nodejs.org/\n\n2) Install PhantomJS:\n\nhttp://phantomjs.org/download.html \n\nEither the 1.x or 2.x versions are fine, but be aware that PhantomJS has a bug in the 2.x line that prevents file uploads.\n\n*Note*: Make sure PhantomJS is available in your system PATH, or use the `phantomPath` option.\n\n3) NPM install Horseman:\n\n`npm install node-horseman`\n\n## Example\n\nSearch on Google:\n\n```js\nvar Horseman = require('node-horseman');\nvar horseman = new Horseman();\n\nvar numLinks = horseman\n  .userAgent(\"Mozilla/5.0 (Windows NT 6.1; WOW64; rv:27.0) Gecko/20100101 Firefox/27.0\")\n  .open('http://www.google.com')\n  .type('input[name=\"q\"]', 'github')\n  .click(\"button:contains('Google Search')\")\n  .waitForNextPage()\n  .count(\"li.g\");\n\nconsole.log(\"Number of links: \" + numLinks);\n\nhorseman.close();\n```\nSave the file as `google.js`. Then, `node google.js`.\n\nFor longer examples, check out the Examples folder.\n\n## API\n\n#### new Horseman(options)\nCreate a new instance that can navigate around the web.\n\nThe available options are:\n* `clientScripts` an array of local javascript files to load onto each page.\n* `timeout`: how long to wait for page loads or wait periods, default `5000` ms.\n* `interval`: how frequently to poll for page load state, default `50` ms.\n* `port`: port to mount the phantomjs instance to, default `12401`.\n* `loadImages`: load all inlined images, default `true`.\n* `cookiesFile`: A file where to store/use cookies.\n* `ignoreSSLErrors`: ignores SSL errors, such as expired or self-signed certificate errors, default `true`.\n* `sslProtocol`: sets the SSL protocol for secure connections `[sslv3|sslv2|tlsv1|any]`, default `any`.\n* `webSecurity`: enables web security and forbids cross-domain XHR, default `true`.\n* `injectJquery`: whether or not jQuery is automatically loaded into each page. Default is `true`. If jQuery is already present on the page, it is not injected.\n* `proxy`: specify the proxy server to use `address:port`, default not set.\n* `proxyType`: specify the proxy server type `[http|socks5|none]`, default not set.\n* `proxyAuth`: specify the auth information for the proxy `user:pass`, default not set.\n* `phantomPath`: If PhantomJS is not installed in your path, you can use this option to specify the executable's location.\n\n### Cleanup\nBe sure to `.close()` each Horseman instance when you're done with it!.\n\n####.close()\nCloses the Horseman instance by shutting down PhantomJS.\n\n### Navigation\n\n#### .open(url)\nLoad the page at `url`.\n\n#### .post(url, postData)\nPOST `postData` to the page at `url`.\n\n#### .back()\nGo back to the previous page.\n\n#### .forward()\nGo forward to the next page.\n\n#### .reload()\nRefresh the current page.\n\n#### .status()\nReturns the HTTP status code of the last opened page.\n\n```js\nvar status = horseman\n  .open('http://www.reddit.com')\n  .status(); // returns 200\n```\n\n#### .switchToChildFrame( selector )\nSwitches focus to the child frame specified by the `selector`.\n\n#### .cookies([object|array of objects])\nWithout any options, this function will return all the cookies inside the browser.\n\n```js\nvar cookies = horseman\n  .open('http://httpbin.org/cookies')\n  .cookies();\n\nconsole.log( cookies ); // []\n```\n\nYou can pass in a cookie object to add to the cookie jar.\n\n```js\nvar cookies = horseman\n  .cookies({\n    name : \"test\",\n    value : \"cookie\",\n    domain: 'google.org'\n  })\n  .open('http://httpbin.org/cookies')\n  .cookies();\n\nconsole.log( cookies ); \n/*\n[ { domain: '.httpbin.org',\n    httponly: false,\n    name: 'test',\n    path: '/',\n    secure: false,\n    value: 'cookie' } ]\n*/\n```\n\nYou can pass in an array of cookie objects to reset all the cookies in the cookie jar (or pass an empty array to remove all cookies).\n\n```js\nvar cookies = horseman\n  .cookies([\n  {\n    name : \"test2\",\n    value : \"cookie2\",\n    domain: 'httpbin.org'\n  },\n  {\n    name : \"test3\",\n    value : \"cookie3\",\n    domain: 'httpbin.org'\n  }])\n  .open('http://httpbin.org/cookies')\n  .cookies();\n\nconsole.log( cookies.length ); // 2\n```\n\n#### .userAgent(userAgent)\nSet the `userAgent` used by PhantomJS. You have to set the userAgent before calling `.open()`.\n\n#### .headers(headers)\nSet the `headers` used when requesting a page. The headers are a javascript object.  You have to set the headers before calling `.open()`.\n\n#### .authentication(user, password)\nSet the `user` and `password` for accessing a web page using basic authentication. Be sure to set it before calling `.open(url)`.\n\n```js\nnew Horseman()\n  .authentication('myUserName','myPassword')\n  .open('http://www.mysecuresite.com');\n```\n#### .viewport(width, height)\nSet the `width` and `height` of the viewport, useful for screenshotting. You have to set the viewport before calling `.open()`.\n\n#### .scrollTo(top, left)\nScroll to a position on the page, relative to the top left corner of the document.\n\n#### .zoom(zoomFactor)\nSet the amount of zoom on a page.  The default zoomFactor is 1. To zoom to 200%, use a zoomFactor of 2.  Combine this with `viewport` to produce high DPI screenshots.\n\n```js\nhorseman\n  .viewport(3200,1800)\n  .zoom(2)\n  .open('http://www.horsemanjs.org')\n  .screenshot('big.png')\n```\n\n### Tabs\n\nHorseman lets you open multiple tabs, just like you probably do in a real browser.  Also, any anchors elements with a target will open in a new tab.\n\nWhenever a new tab is opened, either programatically or because of an action on the page (like `window.open`), a `tabCreated` event will fire.\n\n#### .tabCount()\nGet the number of open tabs.\n\n#### .switchToTab( tabNumber ){\nSwitch to the desired `tabNumber`. The first tab is number 0.\n\n#### .openTab( [url] ){\nOpens a new tab. Optionally, pass in a `url` and the new tab will automatically go that url.\n\n\n### Evaluation\n\nEvaluation elements return information from the page, and end the Horseman API chain.\n\n#### .title()\nGet the title of the current page.\n\n#### .url()\nGet the url of the current page.\n\n#### .visible(selector)\nDetermines if a selector is visible, or not, on the page. Returns a boolean.\n\n#### .exists(selector)\nDetermines if the selector exists, or not, on the page. Returns a boolean.\n\n#### .count(selector)\nCounts the number of `selector` on the page. Returns a number.\n\n#### .html([selector])\nGets the html inside of an element. If no `selector` is provided, it returns the html of the entire page.\n\n#### .text(selector)\nGets the text inside of an element.\n\n#### .value(selector, [val])\nGet, or set, the value of an element.\n\n#### .attribute(selector, attribute)\nGets an attribute of an element.\n\n#### .cssProperty(selector, property)\nGets a CSS property of an element.\n\n#### .width(selector)\nGets the width of an element.\n\n#### .height(selector)\nGets the height of an element.\n\n#### .screenshot(path)\nSaves a screenshot of the current page to the specified `path`. Useful for debugging.\n\n#### .screenshotBase64(type)\nReturns a base64 encoded string representing the screenshot. Type must be one of 'PNG', 'GIF', or 'JPEG'.\n\n#### .pdf(path, [paperSize])\nRenders the page as a PDF. The default paperSize is [US Letter](http://en.wikipedia.org/wiki/Letter_%28paper_size%29).\n\nThe `paperSize` object should be in either this format: \n```js\n{\n  width: '200px',\n  height: '300px',\n  margin: '0px'\n}\n```\nor this format\n```js\n{\n  format: 'A4',\n  orientation: 'portrait',\n  margin: '1cm'\n}\n```\nSupported formats are: `A3`, `A4`, `A5`, `Legal`, `Letter`, `Tabloid`.\n\nOrientation (`portrait`, `landscape`) is optional and defaults to 'portrait'.\n\nSupported dimension units are: 'mm', 'cm', 'in', 'px'. No unit means 'px'.\n\n#### .crop(selector | boundingRectangle, path)\nTakes a screenshot of a portion of the page. You can pass in either a CSS selector or a boundingRectangle `{ top : 50, left: 200, width: 90, height: 200 }`.\n\n```js\n\nvar horseman = new Horseman();\n\nhorseman  \n  .open(\"http://www.yahoo.com\")\n  .crop(\".logo-container\", \"yahoologo.png\");\n\nhorseman.close();\n```\n\n####.evaluate(fn, [arg1, arg2,...])\nInvokes fn on the page with args. On completion it returns a value. Useful for extracting information from the page.\n\n```js\nvar size = horseman\n  .open(\"http://en.wikipedia.org/wiki/Headless_Horseman\")\n  .evaluate( function(selector){\n    // This code is executed inside the browser.\n    // It's sandboxed from Node, and has no access to anything\n    // in Node scope, unless you pass it in, like we did with \"selector\".\n    //\n    // You do have access to jQuery, via $, automatically.\n    return {\n      height : $( selector ).height(),\n      width : $( selector ).width()\n    }\n  }, \".thumbimage\");\n\nconsole.log( size );\nhorseman.close();\n```\n\n### Manipulation\nThese functions change the page, and can be chained consecutively.\n\n#### .manipulate(fn, [arg1, arg2,...])\nWorks the same as .evaluate(), but doesn't return a value, so it can be used without interrupting the Horseman API chain.\n\n```js\nvar count = horseman\n  .open(\"http://en.wikipedia.org/wiki/Headless_Horseman\")\n  .count( selector ); //.count() ends the API chain\n\nconsole.log( count ); // -> 2\n\ncount = horseman\n  .manipulate( function( selector){\n    $(selector).each( function(){\n      $(this).remove();\n    })\n  }, selector)\n  .count( selector );\n\nconsole.log( count );// -> 0\n```\n\n#### .click(selector)\nClicks the `selector` element once.\n\n#### .select(selector, value)\nSets the value of a `select` element to `value`.\n\n#### .clear(selector)\nSets the value of an element to `\"\"`.\n\n#### .type(selector, text [,options])\nEnters the `text` provided into the `selector` element. Options is an object containing `eventType` (keypress, keyup, keydown. Default is keypress) and `modifiers`, which is a string in the formation of `ctrl+shift+alt`.\n\n#### .upload(selector, path)\nSpecify the `path` to upload into a file input `selector` element.\n\n#### .injectJs(file)\nInject a javascript file onto the page.\n\n#### .mouseEvent( type, [, x, y, button] )\nSend a mouse event to the page. Each event is sent to the page as if it comes from real user interaction. `type` must be one of \"mouseup\", \"mousedown\", \"mousemove\", \"doubleclick\", or \"click\", which is the default.  `x` and `y` are optional and specify the location on the page to send the mouse event. `button` is also optional, and defaults to \"left\".\n\n#### .keyboardEvent( type, key [, modifier ] )\nSend a keyboard event to the page. Each event is sent to the page as if it comes from real user interaction. `type` must be one of \"keyup\", \"keydown\", or \"keypress\", which is the default. `key` should be a numerical value from [this page](https://github.com/ariya/phantomjs/commit/cab2635e66d74b7e665c44400b8b20a8f225153a). For instance, to send an \"enter\" key press, use `.keyboardEvent(\"keypress\",16777221)`. \n\n`modifier` is optional, and comes from this list:\n  * 0x02000000: A Shift key on the keyboard is pressed\n  * 0x04000000: A Ctrl key on the keyboard is pressed\n  * 0x08000000: An Alt key on the keyboard is pressed\n  * 0x10000000: A Meta key on the keyboard is pressed\n  * 0x20000000: A keypad button is pressed\n\nTo send a shift+p event, you would use `.keyboardEvent(\"keypress\",\"p\",0x02000000)`.\n\n### Waiting\nThese functions for the browser to wait for an event to occur. If the event does not occur before the timeout period (configurable via the options), a timeout event will fire.\n\n#### .wait(ms)\nWait for `ms` milliseconds e.g. `.wait(5000)`\n\n#### .waitForNextPage()\nWait until a page finishes loading, typically after a `.click()`.\n\n#### .waitForSelector(selector)\nWait until the element `selector` is present e.g. `.waitForSelector('#pay-button')`\n\n#### .waitFor(fn, value)\nWait until the `fn` evaluated on the page returns `value`. \n\n\n### Events\n\n#### .on(event, callback)\nRespond to page events with the callback. Be sure to set these before calling `.open()`. \n\nSupported events are:\n* `initialized` - callback()\n* `loadStarted` - callback()\n* `loadFinished` - callback(status)\n* `tabCreated` - callback()\n* `urlChanged` - callback(targetUrl)\n* `navigationRequested` - callback(url, type, willNavigate, main)\n* `resourceRequested` - callback(requestData, networkRequest)\n* `resourceReceived` - callback(response)\n* `consoleMessage` - callback(msg, lineNumber, sourceId)\n* `alert` - callback(msg)\n* `confirm` - callback(msg)\n* `prompt` - callback(msg, defaultValue)\n* `error` - callback(msg, trace)\n* `timeout` - callback(msg) - Fired when a wait timeout period elapses.\n\nFor a more in depth description, see [the full callbacks list for phantomjs](https://github.com/ariya/phantomjs/wiki/API-Reference-WebPage#callbacks-list).\n\n```js\nhorseman\n  .on('consoleMessage', function( msg ){\n    console.log(msg);\n  })\n```\n\n#### Debug\nTo run the same file with debugging output, run it like this `DEBUG=horseman node myfile.js`.\n\nThis will print out some additional information about what's going on:\n\n```bash\nhorseman .setup() creating phantom instance on port 12406 +0ms\nhorseman load finished, injecting jquery and client scripts +401ms\nhorseman injected jQuery +0ms\nhorseman .open: http://www.google.com +66ms\nhorseman .type() horseman into input[name='q'] +51ms\n```\n\n#### Tests\nAutomated tests for Horseman itself are run using [Mocha](http://visionmedia.github.io/mocha/) and [Should](https://github.com/shouldjs/should.js), both of which will be installed via `npm install`. To run Horseman's tests, just do `npm test`.\n\nWhen the tests are done, you'll see something like this:\n\n```bash\nnpm test\n  85 passing (37s)\n  2 pending\n\n```\n\n## License (MIT)\n\n```\nWWWWWW||WWWWWW\n W W W||W W W\n      ||\n    ( OO )__________\n     /  |           \\\n    /o o|    MIT     \\\n    \\___/||_||__||_|| *\n         || ||  || ||\n        _||_|| _||_||\n       (__|__|(__|__|\n```\n\nCopyright (c) John Titus <john.titus@gmail.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the 'Software'), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.",
  "readmeFilename": "Readme.md",
  "bugs": {
    "url": "https://github.com/johntitus/node-horseman/issues"
  },
  "_id": "node-horseman@1.5.4",
  "dist": {
    "shasum": "e46e94d7950c57a31cfc908c6f8bcbb1c88be991"
  },
  "_from": "node-horseman@",
  "_resolved": "https://registry.npmjs.org/node-horseman/-/node-horseman-1.5.4.tgz"
}
